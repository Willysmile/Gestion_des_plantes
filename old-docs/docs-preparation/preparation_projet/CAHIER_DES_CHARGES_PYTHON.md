# üì± CAHIER DES CHARGES - PLANT MANAGER v2 (Python Desktop)

**Date:** 25 Octobre 2025  
**Projet:** Migration de Laravel ‚Üí Python (FastAPI + PySimpleGUI)  
**Type:** Application Desktop Standalone (SQLite local)  
**Multi-user:** ‚ùå NON (mode single user)

---

## üìã TABLE DES MATI√àRES

1. [Vue d'ensemble](#vue-densemble)
2. [Stack technique](#stack-technique)
3. [Mod√®les de donn√©es](#mod√®les-de-donn√©es)
4. [Fonctionnalit√©s](#fonctionnalit√©s)
5. [Architecture API](#architecture-api)
6. [Sp√©cifications UI](#sp√©cifications-ui)
7. [Flux de donn√©es](#flux-de-donn√©es)
8. [Installation & D√©ploiement](#installation--d√©ploiement)

---

## üéØ VUE D'ENSEMBLE

### Objectifs
- ‚úÖ Repartir de z√©ro (pas de migration de donn√©es Laravel)
- ‚úÖ Application desktop standalone (pas de serveur externe)
- ‚úÖ Aucune installation complexe (pip + Python c'est tout)
- ‚úÖ Gestion compl√®te des plantes avec historiques
- ‚úÖ Gestion des photos avec stockage local
- ‚úÖ Export/Import de donn√©es

### Cas d'usage principal
Un utilisateur g√®re sa collection de plantes en local, peut consulter les historiques et exporter ses donn√©es.

---

## üõ†Ô∏è STACK TECHNIQUE

### Backend
- **Framework:** FastAPI (Python 3.10+)
- **Base de donn√©es:** SQLite (fichier unique `plants.db`)
- **ORM:** SQLAlchemy
- **Serveur:** Uvicorn (local, http://localhost:8000)
- **Validation:** Pydantic

### Frontend
- **Framework UI:** PySimpleGUI
- **Client HTTP:** requests
- **Image handling:** Pillow

### Stockage
- **Base de donn√©es:** `data/plants.db` (SQLite)
- **Photos:** `data/photos/` (dossier local)
- **Exports:** `data/exports/` (ZIP avec JSON + photos)

### D√©ploiement
- **Packager:** PyInstaller (ex√©cutable unique)
- **Distribution:** Single EXE (Windows) ou binary (Linux/Mac)

---

## üíæ MOD√àLES DE DONN√âES

### 1. **Plant** (Plante)
```
id                  INT PRIMARY KEY
name                STR (nom commun)
scientific_name     STR (nom scientifique)
family              STR (famille botanique)
subfamily           STR
genus               STR
species             STR
subspecies          STR
variety             STR
cultivar            STR
reference           STR (identifiant unique pour l'utilisateur)
description         STR (max 200 chars)
health_status       STR (enum: healthy, sick, recovering, dead)
difficulty_level    STR (enum: easy, medium, hard)
growth_speed        STR (enum: slow, medium, fast)
is_indoor           BOOL
is_outdoor          BOOL
is_favorite         BOOL
is_toxic            BOOL
flowering_season    STR (comma-separated months)

# Localisation & Achat
location_id         FK ‚Üí Location
purchase_date       STR (format: "dd/mm/yyyy" ou "mm/yyyy")
purchase_place_id   FK ‚Üí PurchasePlace
purchase_price      DECIMAL

# Environnement
watering_frequency_id  FK ‚Üí WateringFrequency
light_requirement_id   FK ‚Üí LightRequirement
temperature_min     INT (¬∞C)
temperature_max     INT (¬∞C)
humidity_level      INT (%)
soil_humidity       STR
soil_ideal_ph       DECIMAL
soil_type           STR

# Care
pot_size            STR (ex: "15cm")
max_height          INT (cm)
last_watering_date  DATETIME
last_fertilizing_date DATETIME
fertilizing_frequency STR
last_repotting_date DATETIME
next_repotting_date DATETIME

# Metadata
info_url            STR (lien externe)
main_photo          STR (filename)
created_at          DATETIME
updated_at          DATETIME
is_archived         BOOL
archived_date       DATETIME
archived_reason     STR
deleted_at          DATETIME (soft delete)
```

### 2. **Photo**
```
id                  INT PRIMARY KEY
plant_id            FK ‚Üí Plant
filename            STR (UUID.webp)
mime_type           STR (image/webp)
size                INT (bytes)
description         STR (optionnel)
is_main             BOOL (true = photo de couverture)
created_at          DATETIME
deleted_at          DATETIME (soft delete)
```

### 3. **WateringHistory**
```
id                  INT PRIMARY KEY
plant_id            FK ‚Üí Plant
watering_date       DATE
amount              STR (ex: "250ml")
notes               STR (optionnel)
created_at          DATETIME
```

### 4. **FertilizingHistory**
```
id                  INT PRIMARY KEY
plant_id            FK ‚Üí Plant
fertilizing_date    DATE
fertilizer_type_id  FK ‚Üí FertilizerType
amount              STR
notes               STR
created_at          DATETIME
```

### 5. **RepottingHistory**
```
id                  INT PRIMARY KEY
plant_id            FK ‚Üí Plant
repotting_date      DATE
old_pot_size        STR
new_pot_size        STR
soil_type           STR
notes               STR
created_at          DATETIME
```

### 6. **DiseaseHistory**
```
id                  INT PRIMARY KEY
plant_id            FK ‚Üí Plant
disease_date        DATE
name                STR (ex: "Moisissure")
treatment           STR (traitement appliqu√©)
recovery_status     STR (enum: in_progress, recovered, died)
notes               STR
created_at          DATETIME
```

### 7. **PlantHistory**
```
id                  INT PRIMARY KEY
plant_id            FK ‚Üí Plant
body                STR (notes g√©n√©rales)
created_at          DATETIME
```

### 8. **Tag** (√âtiquette / Cat√©gorie)
```
id                  INT PRIMARY KEY
name                STR (ex: "Succulente", "Toxique")
tag_category_id     FK ‚Üí TagCategory
created_at          DATETIME
```

### 9. **TagCategory**
```
id                  INT PRIMARY KEY
name                STR (cat√©gorie: ex "Type", "Propri√©t√©")
created_at          DATETIME
```

### 10. **Plant-Tag** (Relation Many-to-Many)
```
plant_id            FK ‚Üí Plant
tag_id              FK ‚Üí Tag
```

### Lookup Tables (√ânum√©rations)

**Location** (Emplacements)
```
id, name (ex: "Fen√™tre sud", "Bureau")
```

**PurchasePlace** (Lieux d'achat)
```
id, name (ex: "P√©pini√®re X", "Amazon")
```

**WateringFrequency** (Fr√©quence d'arrosage)
```
id, name (ex: "Journellement", "Chaque 3 jours")
```

**LightRequirement** (Besoin en lumi√®re)
```
id, name (ex: "Lumi√®re indirecte", "Ombre partielle")
```

**FertilizerType** (Types d'engrais)
```
id, name, unit (ex: "NPK 10-10-10", unit: "ml")
```

---

## üé® FONCTIONNALIT√âS

### 1. **Gestion des Plantes** ‚úÖ
- [x] Cr√©er une plante (form complet)
- [x] Visualiser une plante (d√©tails complets)
- [x] Modifier une plante
- [x] Supprimer une plante (soft delete)
- [x] Archiver/Restaurer une plante
- [x] Lister toutes les plantes (avec filtres & recherche)
- [x] Exporter r√©f√©rence automatique (format: TYPE-DATE-COUNTER)

### 2. **Photos** üñºÔ∏è
- [x] Upload photo(s) pour une plante
- [x] Conversion auto en WebP
- [x] D√©finir photo principale
- [x] Supprimer photo
- [x] Affichage galerie

### 3. **Historiques** üìù
- [x] **Arrosage** - Enregistrer date, quantit√©, notes
- [x] **Fertilisation** - Enregistrer date, type, quantit√©, notes
- [x] **Rempotage** - Enregistrer date, ancienne/nouvelle taille pot, type sol
- [x] **Maladies** - Enregistrer nom, traitement, date, statut r√©cup√©ration
- [x] **Notes g√©n√©rales** - Notes libres (PlantHistory)
- [x] Voir tous les historiques d'une plante
- [x] Modifier/Supprimer entr√©e historique

### 4. **Taxonomie Botanique** üåø
Fileds compl√®te pour classification :
- [x] Nom commun + Nom scientifique
- [x] Famille, Sous-famille, Genre, Esp√®ce, Sous-esp√®ce
- [x] Vari√©t√©, Cultivar

### 5. **Param√®tres & Lookup** ‚öôÔ∏è
- [x] Gestion des emplacements (Location)
- [x] Gestion des lieux d'achat (PurchasePlace)
- [x] Gestion des types d'engrais (FertilizerType)
- [x] Gestion des fr√©quences d'arrosage (WateringFrequency)
- [x] Gestion des besoins lumineux (LightRequirement)
- [x] Gestion des cat√©gories de tags (TagCategory)
- [x] Gestion des tags (Tag)

### 6. **Tags & Cat√©gories** üè∑Ô∏è
- [x] Associer multiples tags √† une plante
- [x] Tags organis√©s par cat√©gorie
- [x] Filtrer par tag
- [x] Admin: Cr√©er/Modifier/Supprimer tags

### 7. **Recherche & Filtres** üîç
- [x] Recherche par nom (texte)
- [x] Filtrer par location
- [x] Filtrer par tag
- [x] Filtrer par statut (sant√©)
- [x] Filtrer par niveau difficult√©
- [x] Filtrer par type (indoor/outdoor)
- [x] Filtrer par favoris

### 8. **Export/Import** üì¶
- [x] Exporter toutes les donn√©es en ZIP (JSON + photos)
- [x] Importer depuis ZIP
- [x] Checksum SHA256 pour int√©grit√©
- [x] M√©tadonn√©es dans export (date, counts, version)
- [x] Dry-run preview avant import

### 9. **Reset & R√©cup√©ration** üîÑ
- [x] R√©initialiser base (optionnel: avec backup automatique)
- [x] Soft delete sur les plantes (30j pour r√©cup√©rer?)
- [x] Audit log de tous les changements
- [x] R√©cup√©rer item supprim√©

### 10. **Statistiques** üìä
- [x] Nombre total de plantes
- [x] Plantes par location
- [x] Plantes par tag
- [x] Plantes √† arroser aujourd'hui
- [x] Plantes √† fertiliser aujourd'hui
- [x] Sant√© g√©n√©rale (% maladies)
- [x] Plantes archiv√©es/supprim√©es

---

## üîå ARCHITECTURE API

### Endpoints FastAPI

**Base URL:** `http://localhost:8000/api`

#### üå± PLANTS
```
GET    /plants                      - Lister toutes les plantes
GET    /plants/{id}                 - D√©tails d'une plante
POST   /plants                      - Cr√©er plante
PUT    /plants/{id}                 - Modifier plante
DELETE /plants/{id}                 - Supprimer (soft delete)
POST   /plants/{id}/archive         - Archiver
POST   /plants/{id}/restore         - Restaurer
GET    /plants/archived             - Lister plantes archiv√©es
POST   /plants/generate-reference   - G√©n√©rer r√©f√©rence automatique
```

#### üì∑ PHOTOS
```
POST   /plants/{id}/photos          - Upload photo
PATCH  /plants/{id}/photos/{photoId} - Modifier (is_main, description)
DELETE /plants/{id}/photos/{photoId} - Supprimer photo
GET    /plants/{id}/photos          - Lister photos d'une plante
```

#### üöø WATERING HISTORY
```
GET    /plants/{id}/watering-history           - Lister
POST   /plants/{id}/watering-history           - Cr√©er
PUT    /plants/{id}/watering-history/{hid}     - Modifier
DELETE /plants/{id}/watering-history/{hid}     - Supprimer
```

#### üßÇ FERTILIZING HISTORY
```
GET    /plants/{id}/fertilizing-history        - Lister
POST   /plants/{id}/fertilizing-history        - Cr√©er
PUT    /plants/{id}/fertilizing-history/{hid}  - Modifier
DELETE /plants/{id}/fertilizing-history/{hid}  - Supprimer
```

#### ü™¥ REPOTTING HISTORY
```
GET    /plants/{id}/repotting-history          - Lister
POST   /plants/{id}/repotting-history          - Cr√©er
PUT    /plants/{id}/repotting-history/{hid}    - Modifier
DELETE /plants/{id}/repotting-history/{hid}    - Supprimer
```

#### ü¶† DISEASE HISTORY
```
GET    /plants/{id}/disease-history            - Lister
POST   /plants/{id}/disease-history            - Cr√©er
PUT    /plants/{id}/disease-history/{hid}      - Modifier
DELETE /plants/{id}/disease-history/{hid}      - Supprimer
```

#### üìù PLANT HISTORY (Notes)
```
GET    /plants/{id}/histories                  - Lister notes
POST   /plants/{id}/histories                  - Cr√©er note
PUT    /plants/{id}/histories/{hid}            - Modifier note
DELETE /plants/{id}/histories/{hid}            - Supprimer note
```

#### üè∑Ô∏è TAGS
```
GET    /tags                                   - Lister tous les tags
POST   /tags                                   - Cr√©er tag
PUT    /tags/{id}                              - Modifier tag
DELETE /tags/{id}                              - Supprimer tag
GET    /tag-categories                         - Lister cat√©gories
POST   /tag-categories                         - Cr√©er cat√©gorie
DELETE /tag-categories/{id}                    - Supprimer cat√©gorie
```

#### ‚öôÔ∏è SETTINGS / LOOKUP
```
GET    /locations                              - Lister emplacements
POST   /locations                              - Cr√©er emplacement
PUT    /locations/{id}                         - Modifier
DELETE /locations/{id}                         - Supprimer

GET    /purchase-places                        - Lister lieux d'achat
POST   /purchase-places                        - Cr√©er
PUT    /purchase-places/{id}                   - Modifier
DELETE /purchase-places/{id}                   - Supprimer

GET    /watering-frequencies                   - Lister fr√©quences
POST   /watering-frequencies                   - Cr√©er
PUT    /watering-frequencies/{id}              - Modifier
DELETE /watering-frequencies/{id}              - Supprimer

GET    /light-requirements                     - Lister besoins lumi√®re
POST   /light-requirements                     - Cr√©er
PUT    /light-requirements/{id}                - Modifier
DELETE /light-requirements/{id}                - Supprimer

GET    /fertilizer-types                       - Lister types engrais
POST   /fertilizer-types                       - Cr√©er
PUT    /fertilizer-types/{id}                  - Modifier
DELETE /fertilizer-types/{id}                  - Supprimer
```

#### üì¶ EXPORT/IMPORT
```
POST   /export                                 - Exporter donn√©es
POST   /import/preview                         - Preview import
POST   /import                                 - Importer donn√©es
GET    /exports                                - Lister fichiers export
DELETE /exports/{filename}                     - Supprimer export
```

#### üîÑ RESET & R√âCUP√âRATION
```
GET    /audit-logs                             - Historique audit
GET    /deleted-items                          - Items supprim√©s (soft delete)
POST   /recover/{id}                           - R√©cup√©rer item
POST   /reset/preview                          - Preview r√©initialisation
POST   /reset                                  - R√©initialiser (avec backup)
```

#### üìä STATISTIQUES
```
GET    /statistics                             - Toutes stats
GET    /statistics/plants-today-watering       - Plantes √† arroser
GET    /statistics/plants-today-fertilizing   - Plantes √† fertiliser
```

---

## üñ•Ô∏è SP√âCIFICATIONS UI (PySimpleGUI)

### Structure de fen√™tres

#### 1. **Main Window** (Accueil/Liste)
- ‚úÖ Barre de menu (File, Edit, View, Help)
- ‚úÖ Barre de recherche avec autocomplete
- ‚úÖ Onglets : "Toutes", "Archiv√©es", "Favorites", "Malade"
- ‚úÖ Filtres : Location, Tag, Difficult√©, Type (indoor/outdoor)
- ‚úÖ Tableau avec colonnes : Photo (thumbnail), Nom, Location, Derni√®re arrosage, Sant√©, Actions (Edit, Delete, Archive)
- ‚úÖ Boutons : [+ Nouvelle], [Statistiques], [Param√®tres], [Export]

#### 2. **Plant Form** (Cr√©er/Modifier)
- ‚úÖ Tabs : Infos de base | Photos | Caract√©ristiques | Care & History
- ‚úÖ **Tab 1 - Infos de base:**
  - Nom, Nom scientifique
  - Famille, Sous-famille, Genre, Esp√®ce, Subspecies, Vari√©t√©, Cultivar
  - Description (200 chars max)
  - Health Status, Difficulty, Growth Speed
  - Indoor / Outdoor checkboxes
  - Favorite / Toxic checkboxes
  
- ‚úÖ **Tab 2 - Photos:**
  - Bouton [Upload Photo]
  - Galerie avec thumbnails
  - Checkbox "Photo principale" pour chaque
  - Bouton [Supprimer]
  
- ‚úÖ **Tab 3 - Caract√©ristiques:**
  - Temp√©rature min/max
  - Humidit√© %
  - pH sol id√©al
  - Type sol
  - Light Requirement
  - Pot size
  - Max height
  - Flowering season (multi-select mois)
  - Lien info (URL)
  
- ‚úÖ **Tab 4 - Achat & Care:**
  - Purchase date (date picker: dd/mm/yyyy)
  - Purchase place (dropdown)
  - Purchase price
  - Location (dropdown)
  - R√©f√©rence
  - Watering frequency
  - Fertilizing frequency
  - Last dates (auto-filled)
  
- ‚úÖ Boutons: [Sauvegarder] [Annuler]

#### 3. **Plant Detail Window** (Consultation)
- ‚úÖ Photo principale (grande)
- ‚úÖ Infos de base
- ‚úÖ Onglets : Infos | Photos | Historiques (Arrosage, Fertilisation, Rempotage, Maladies, Notes)
- ‚úÖ Pour chaque historique :
  - Tableau avec colonnes : Date, Info, Notes
  - Boutons : [+ Ajouter], [Modifier], [Supprimer]
  - Export historique (CSV)
- ‚úÖ Boutons: [Modifier] [Archiver] [Supprimer] [Fermer]

#### 4. **Settings Window**
- ‚úÖ Tabs : Locations | Purchase Places | Watering Freq | Light Req | Fertilizer Types | Tags
- ‚úÖ Pour chaque tab :
  - Tableau (liste des items)
  - Boutons: [+ Ajouter] [Modifier] [Supprimer]
- ‚úÖ Checkbox: "Afficher dans les plantes archiv√©es"

#### 5. **Tags Management**
- ‚úÖ Tableau avec colonnes : Cat√©gorie | Nom
- ‚úÖ Dropdown "Cat√©gorie"
- ‚úÖ Boutons: [+ Ajouter Tag] [+ Ajouter Cat√©gorie] [Modifier] [Supprimer]

#### 6. **Statistics Window**
- ‚úÖ KPI Cards : Total plantes, √Ä arroser, √Ä fertiliser, Malade, Archiv√©es
- ‚úÖ Graphique : Plantes par location
- ‚úÖ Graphique : Plantes par tag
- ‚úÖ Graphique : Sant√© (sain / malade / r√©cup√©ration)
- ‚úÖ Tableau : Arrosages pr√©vus (prochains 7 jours)

#### 7. **Export/Import Window**
- ‚úÖ **Export:**
  - Bouton [Exporter maintenant]
  - Checkbox [Inclure photos]
  - Liste des exports existants
  - Boutons: [T√©l√©charger] [Supprimer]
  
- ‚úÖ **Import:**
  - Bouton [S√©lectionner fichier ZIP]
  - Preview : Nombre plantes, photos, tags
  - Dropdown : Mode (FRESH / MERGE / REPLACE)
  - Bouton [Importer]

#### 8. **Reset Window**
- ‚úÖ Warning message
- ‚úÖ Checkbox [Cr√©er backup automatique avant reset]
- ‚úÖ Bouton [R√©initialiser] (confirmation dialog)
- ‚úÖ Progress bar pendant reset

#### 9. **Audit Log / Recovery Window**
- ‚úÖ Tableau : Date | Utilisateur | Action | Entity | Details
- ‚úÖ Filtres: Type action, Date range
- ‚úÖ Pour items supprim√©s :
  - Tableau : Plant name | Date suppression | Action [R√©cup√©rer]

### Design & Couleurs
- **Th√®me:** Light/Dark toggle
- **Palette:** Verte (nature)
  - Primary: #2ecc71 (vert)
  - Secondary: #3498db (bleu)
  - Danger: #e74c3c (rouge)
  - Neutral: #95a5a6 (gris)

---

## üîÑ FLUX DE DONN√âES

### Flow: Cr√©er une plante
```
UI (PySimpleGUI)
  ‚Üì User remplit form + upload photo
  ‚Üì POST /plants {name, scientific_name, ...}
Backend (FastAPI)
  ‚Üì Validate avec Pydantic
  ‚Üì Save Plant en DB
  ‚Üì Move uploaded photo en WebP
  ‚Üì Return {id, ...}
  ‚Üì
UI
  ‚Üì Affiche toast "Plante cr√©√©e!"
  ‚Üì Refresh liste plantes
```

### Flow: Arroser une plante
```
UI ‚Üí POST /plants/{id}/watering-history {watering_date, amount, notes}
Backend ‚Üí Create WateringHistory
         ‚Üí Update Plant.last_watering_date
         ‚Üí Return {success: true}
UI ‚Üí Toast "Arrosage enregistr√©"
   ‚Üí Refresh d√©tails plante
```

### Flow: Exporter donn√©es
```
UI [Export button]
  ‚Üì
GET /export?include_photos=true
Backend
  ‚Üì Collect all Plants + Relations
  ‚Üì Copy photos en ZIP
  ‚Üì Generate backup.json + metadata.json
  ‚Üì Return ZIP file (stream)
  ‚Üì
UI ‚Üí Save ZIP en /data/exports/
   ‚Üí Toast "Export termin√©!"
```

### Flow: Importer donn√©es
```
UI [Select ZIP file]
  ‚Üì
POST /import/preview {file}
Backend ‚Üí Parse ZIP
        ‚Üí Extract JSON
        ‚Üí Validate (dry-run)
        ‚Üí Return {plants_count, tags_count, warnings}
UI ‚Üí Show dialog: "50 plantes trouv√©es, OK?"
  ‚Üì User clicks OK
  ‚Üì
POST /import {file, mode: "MERGE"}
Backend ‚Üí Import data (mode check)
        ‚Üí Update DB
        ‚Üí Return {imported_count}
UI ‚Üí Toast "Import compl√©t√©!"
```

---

## üì¶ INSTALLATION & D√âPLOIEMENT

### Structure du projet

```
plant_manager_python/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py (entry point FastAPI)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plant.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photo.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ history.py (watering, fertilizing, etc)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tag.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plant_schema.py (Pydantic)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plant_service.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ backup_service.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ image_service.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plants.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photos.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export_import.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.py (SQLAlchemy setup)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îî‚îÄ‚îÄ run.py
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py (PySimpleGUI entry)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ windows/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_window.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plant_form.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plant_detail.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export_import.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialogs.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tables.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api_client.py (requests wrapper)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ run.py
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ plants.db (SQLite - sera cr√©√©)
‚îÇ   ‚îú‚îÄ‚îÄ photos/ (images WebP)
‚îÇ   ‚îî‚îÄ‚îÄ exports/ (ZIP backups)
‚îÇ
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ INSTALLATION.md
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ requirements-all.txt (dependencies compl√®tes)
```

### D√©pendances Backend

```
fastapi==0.109.0
uvicorn==0.27.0
sqlalchemy==2.0.25
pydantic==2.5.3
pydantic-settings==2.1.0
pillow==10.1.0
python-multipart==0.0.6
python-dateutil==2.8.2
```

### D√©pendances Frontend

```
PySimpleGUI==4.60.5
requests==2.31.0
Pillow==10.1.0
matplotlib==3.8.2
```

### Installation (utilisateur final)

#### Option 1: Source (Dev)
```bash
# Clone repo
git clone https://github.com/Willysmile/Plants.git plant_manager_python
cd plant_manager_python

# Terminal 1: Backend
cd backend
pip install -r requirements.txt
python run.py  # Lance sur http://localhost:8000

# Terminal 2: Frontend
cd frontend
pip install -r requirements.txt
python run.py  # Lance UI PySimpleGUI
```

#### Option 2: Ex√©cutable (Prod)
```bash
# Download plant_manager.exe (ou .app/.bin selon OS)
./plant_manager.exe
# (inclut backend + frontend, lance tout automatiquement)
```

### Build Ex√©cutable (PyInstaller)

```bash
# Backend + Frontend en single EXE
pyinstaller --onefile \
  --add-data "data:data" \
  --hidden-import=fastapi \
  --hidden-import=uvicorn \
  --hidden-import=sqlalchemy \
  ./backend/main.py \
  ./frontend/main.py
```

---

## üîê S√©curit√© & Int√©grit√©

### Backup/Checksum
- ‚úÖ Tous les exports inclus SHA256 checksum
- ‚úÖ Validation checksum lors import
- ‚úÖ Audit log de toutes les op√©rations
- ‚úÖ Soft delete (30j recovery window)

### Donn√©es
- ‚úÖ SQLite local (chiffrement optionnel)
- ‚úÖ Photos en WebP optimis√©es
- ‚úÖ Pas de donn√©es sensibles
- ‚úÖ Export portable (ZIP standard)

---

## üìù NOTES

### Diff√©rences avec Laravel
1. **Pas de multi-user** ‚Üí simplification massive
2. **SQLite local** ‚Üí pas de serveur MySQL
3. **PySimpleGUI** ‚Üí interface desktop native
4. **Single binary** ‚Üí d√©ploiement trivial
5. **M√™me features, meilleur DX** pour partage/installation

### √Ä ne PAS impl√©menter
- ‚ùå Authentification (single user)
- ‚ùå Multi-user permissions
- ‚ùå API authentication/tokens
- ‚ùå Email verification
- ‚ùå User registration

### Extensibilit√© future
- üîÆ Th√®me clair/sombre
- üîÆ Synchronisation cloud
- üîÆ Mode multi-user (SQLite ‚Üí PostgreSQL)
- üîÆ Mobile version
- üîÆ Recommandations IA (care tips)

---

## ‚úÖ CHECKLIST FINALE

- [ ] Backend API compl√®te ‚úÖ
- [ ] Base de donn√©es SQLite ‚úÖ
- [ ] Frontend PySimpleGUI ‚úÖ
- [ ] Export/Import ZIP ‚úÖ
- [ ] Gestion photos WebP ‚úÖ
- [ ] Historiques tous types ‚úÖ
- [ ] Tags & cat√©gories ‚úÖ
- [ ] Audit logs ‚úÖ
- [ ] Tests unitaires
- [ ] Documentation code
- [ ] README complet
- [ ] Build PyInstaller
- [ ] Deploy sur GitHub

---

**Pr√™t √† coder! üöÄ**
